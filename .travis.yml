language: python
python:
- 2.6
- 2.7
- 3.2
- 3.3
- pypy
install:
- pip install -r build_requirements.txt
- pip install -r requirements.txt
script:
- py.test -v --cov winrm --cov-report term-missing winrmlib/tests/
after_success:
- pushd .
- coveralls
- pwd && cd src
- python setup.py sdist
- cd ..
- pwd && cd src/dist
- pip install winrmlib-*.tar.gz
- echo "y" | pip uninstall winrmlib
- popd
deploy:
  provider: pypi
  user: iclegg
  distributions: sdist
  password:
    secure: Y3l6ZkHJw796xJJoMhS4iroI26ibwx138rJuXDEt2W7lM21suECwDkoHNn35up/iaHKCPlTu076KTS+9LRfty0MQYWsmwyMc7oXL82QvACLBd7WgYlxt66OsFT4y6GKKWSxt0AKGBQEcSlAtCgM5rt0bxv8Dp3+hJYZUQ55/Sro=
